# 2-5-1: MAKEで誕生日自動お祝いBotを作ろう 🎂

## MAKEとは？

**MAKE（旧Integromat）**は、様々なアプリやサービスを連携させて自動化ワークフローを作成できるノーコードツールです。プログラミング不要で、ドラッグ＆ドロップの操作だけで複雑な自動化を実現できます。

### MAKEの特徴
- 🔗 **500以上のアプリと連携**: Google、LINE、Slack、ChatGPTなど
- 🎨 **ビジュアルエディタ**: フローを視覚的に設計
- ⚡ **リアルタイム実行**: トリガーに応じて即座に処理
- 📅 **スケジュール実行**: 定期的な自動実行も可能
- 🆓 **無料プランあり**: 月1,000回の実行まで無料

---

## 🎉 今回作るもの：誕生日自動お祝いBot

### 完成イメージ
毎朝9時に自動で動作し、今日が誕生日の友達がいたら、ChatGPTが個別のお祝いメッセージを作成してLINEやSlackに送信します。

### このBotのメリット
- 🎁 誕生日を忘れることがなくなる
- 💝 AIが個別のメッセージを作成してくれる
- ⏰ 朝一番にお祝いメッセージが送れる
- 📝 一度設定すれば永続的に動作

---

## 📋 必要な準備

### 必要なアカウント（無料）
1. **MAKEアカウント**
   - https://www.make.com/
   - 無料プランでOK

2. **Googleアカウント**
   - Googleスプレッドシート用
   - 既存のアカウントでOK

3. **通知先サービス**（どちらか1つ）
   - **LINE Notify**（個人利用向け）
   - **Slack**（チーム利用向け）

4. **ChatGPT APIキー**（オプション）
   - メッセージを自動生成したい場合
   - 無くても固定メッセージで動作可能

---

## Step 1: Googleスプレッドシート準備 📊

### 1-1. スプレッドシート作成

1. Googleドライブを開く
2. 「新規」→「Googleスプレッドシート」をクリック
3. シート名を「誕生日リスト」に変更

### 1-2. データ入力

以下の形式でデータを入力します：

| A列 | B列 | C列 | D列 |
|-----|-----|-----|-----|
| 名前 | 誕生日 | 年齢 | 趣味・特徴 |
| 山田太郎 | 3/15 | 28 | サッカー好き |
| 鈴木花子 | 12/8 | 25 | 猫を飼っている |
| 田中次郎 | 3/15 | 30 | コーヒー愛好家 |

**ポイント：**
- 誕生日は「月/日」形式で入力（年は不要）
- 趣味・特徴はChatGPTがメッセージ生成時に使用
- テスト用に今日の日付の人を1人入れておく

### 1-3. 共有設定

1. 右上の「共有」ボタンをクリック
2. 「リンクを知っている全員」を選択
3. 権限を「閲覧者」に設定
4. リンクをコピー（後で使用）

---

## Step 2: LINE Notify設定（通知先の準備）

### 2-1. LINE Notifyトークン取得

1. [LINE Notify](https://notify-bot.line.me/)にアクセス
2. 右上の「ログイン」からLINEアカウントでログイン
3. 「マイページ」をクリック
4. 「トークンを発行する」をクリック
5. トークン名を「誕生日Bot」と入力
6. 通知先を「1:1でLINE Notifyから通知を受け取る」を選択
7. 「発行する」をクリック
8. 表示されたトークンをコピー（一度しか表示されません！）

---

## Step 3: MAKEでシナリオ作成 🔧

### 3-1. MAKEにログイン

1. [MAKE](https://www.make.com/)にアクセス
2. アカウント作成またはログイン
3. 「Create a new scenario」をクリック

### 3-2. トリガー設定（毎朝9時に実行）

1. 「+」ボタンをクリック
2. 「Schedule」を検索して選択
3. 設定：
   - Run scenario: `Every Day`
   - Time: `09:00`
   - Timezone: `Asia/Tokyo`

### 3-3. Googleスプレッドシート接続

1. 「+」をクリックして新しいモジュールを追加
2. 「Google Sheets」を検索して選択
3. 「Search Rows」を選択
4. Googleアカウントと連携
5. 設定：
   - Spreadsheet: 作成した「誕生日リスト」を選択
   - Sheet: `シート1`
   - Filter: 設定しない（全行取得）

### 3-4. 今日の誕生日をフィルタリング

1. スプレッドシートモジュールの後に「Router」を追加
2. Routerから分岐を作成
3. 分岐にフィルターを設定：
   ```
   誕生日（B列）が今日の日付と一致
   ```
   具体的な設定：
   - `formatDate(now; "M/D")` = `B列の値`

### 3-5. ChatGPTでメッセージ生成（オプション）

1. フィルター通過後に「OpenAI」モジュールを追加
2. 「Create a Completion」を選択
3. APIキーを設定
4. プロンプト：
   ```
   今日は{{名前}}さんの{{年齢}}歳の誕生日です。
   {{趣味・特徴}}という特徴があります。
   心温まる誕生日メッセージを100文字程度で作成してください。
   絵文字も使ってください。
   ```

### 3-6. LINE通知送信

1. 最後に「HTTP」モジュールを追加
2. 「Make a request」を選択
3. 設定：
   - URL: `https://notify-api.line.me/api/notify`
   - Method: `POST`
   - Headers:
     - Authorization: `Bearer [LINE Notifyトークン]`
   - Body type: `application/x-www-form-urlencoded`
   - Fields:
     - message: 
     ```
     🎂 誕生日のお知らせ 🎂
     
     今日は{{名前}}さんの誕生日です！
     
     {{ChatGPTのメッセージ or 固定メッセージ}}
     ```

### 3-7. シナリオ保存と有効化

1. 左下の「SAVE」をクリック
2. シナリオ名を「誕生日自動お祝いBot」に設定
3. スイッチを「ON」にして有効化

---

## Step 4: テスト実行 🧪

### 4-1. 手動テスト

1. MAKEのシナリオ画面で「Run once」をクリック
2. 処理が実行されることを確認
3. LINEに通知が届くことを確認

### 4-2. デバッグのコツ

- 各モジュールの出力を確認
- エラーが出た場合は、該当モジュールの設定を見直し
- テスト用データで動作確認してから本番データに切り替え

---

## 🚀 応用アイデア

### レベルアップ案

1. **記念日も管理**
   - 結婚記念日、入社記念日なども追加
   - 種類によってメッセージを変更

2. **複数の通知先**
   - 個人用LINE、チームSlackに同時送信
   - 相手によって通知先を変更

3. **画像付きメッセージ**
   - DALL-Eで誕生日カード画像を生成
   - 画像付きでより豪華なお祝い

4. **事前リマインド**
   - 3日前に「プレゼント準備」リマインド
   - 前日に「明日は〇〇さんの誕生日」通知

5. **年齢計算の自動化**
   - 生年月日から現在の年齢を自動計算
   - 「〇〇歳おめでとう」メッセージ

---

## 💡 Tips & トラブルシューティング

### よくある質問

**Q: 無料プランの制限は？**
A: 月1,000回の実行まで無料。1日1回実行なら余裕です。

**Q: LINEに通知が来ない**
A: トークンの設定を確認。LINE Notifyとの友達追加も必要です。

**Q: 日付の判定がうまくいかない**
A: 日付形式を統一（M/D形式）してください。

**Q: ChatGPT APIは必須？**
A: 必須ではありません。固定メッセージでも十分使えます。

### セキュリティ注意事項

- APIキーやトークンは絶対に公開しない
- スプレッドシートの共有範囲に注意
- 個人情報の取り扱いは慎重に

---

## まとめ

このBotを作ることで、以下のスキルが身につきます：

- ✅ MAKEの基本操作
- ✅ 複数サービスの連携方法
- ✅ 自動化ワークフローの設計
- ✅ APIの基本的な使い方

さらに、大切な人の誕生日を忘れることもなくなり、人間関係も良好に！
ぜひ自分なりのカスタマイズを加えて、オリジナルBotを作ってみてください！

---

**次のステップ**: 他の記念日管理や、業務自動化にもMAKEを活用してみましょう！