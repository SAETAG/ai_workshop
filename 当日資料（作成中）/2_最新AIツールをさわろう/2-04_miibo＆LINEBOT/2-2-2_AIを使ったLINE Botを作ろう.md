# 2-2-2: AIを使ったLINE Botを作ろう

## 会話型AIのLINE Botを作ろう

このパートでは、いよいよメインである「会話型AIのLINE Bot」を作っていきます。
miiboとLINEが連携することで、会話型AIが組み込まれたLINE Botを作ることができます。

---

## 1. 作るもの

### miiboとLINEが連携した会話型AIのLINE Bot

前のパートで作成したmiiboのエージェントをLINEと連携させ、LINEアプリ上で動作するAIチャットボットを完成させます。

**完成イメージ：**
- LINEで友だち追加するだけで使える
- 24時間365日対応可能
- 自然な会話ができるAIアシスタント

---

## 2. ハンズオン: 会話型AIのLINE Botを作ってみよう

### 2-1. LINEにログインしてチャネルを開こう

#### 手順1：LINE Developersにアクセス

1. [LINE Developers](https://developers.line.biz/)を開く
2. 画面右上の**「コンソールにログイン」**をクリック

#### 手順2：LINEアカウントでログイン

1. **「LINEアカウントでログイン」**をクリック
2. **「ログイン」**をクリック

#### 手順3：チャネルを開く

1. 画面左側の**「プロバイダー」**を開く
2. 事前に作成した**プロバイダー**をクリック
3. 事前に作成している**チャネル**をクリック

（画像にも操作のクリックする順番を①②③と載せているので、参考にしてください）

管理画面のようなチャネルのページが開かれていたらOKです。

### 2-2. miiboにLINEの情報を登録しよう

次にmiiboの管理画面に戻り、事前準備で取得したLINEの情報をmiiboに登録して連携の準備をしていきます。

#### 手順1：外部サービス連携画面を開く

1. miiboの管理画面に戻る
2. 左側のメニューバーから**「外部サービス連携」**をクリック

#### 手順2：LINE連携を選択

1. **「LINE上で会話する」**をクリック

#### 手順3：認証情報を入力

1. メモ帳やWordに控えておいた以下の情報を貼り付け：
   - **チャネルシークレット**
   - **チャネルアクセストークン**

2. 2つの情報が入力できたら、**「LINEと連携する」**ボタンをクリック

#### 手順4：Webhook URLの確認

連携がうまくいくと、**Webhook URL**というURLが発行されます。
このURLをコピーして、次のステップで使用します。

### 💡 Webhookとは？

Webhookとは、アプリケーション間でリアルタイムにデータを共有するための仕組みのことです。
何かしらのイベントが実行されたときに、外部サービスにリアルタイムで通知をします。

**今回の場合：**
- ユーザーがLINEでメッセージを送信
- LINEがWebhook URLにメッセージを送信
- miiboがメッセージを受け取り、AIが返答を生成
- 返答をLINEに送り返す

### 2-3. LINEにWebhook URLを登録しよう

最後に、miiboで発行されたWebhook URLをLINEに登録して連携していきます。

#### 手順1：Webhook URLをコピー

1. miiboで発行された**「Webhook URL」**をコピー

#### 手順2：LINE側でWebhook設定

1. LINEのチャネルページに戻る
2. **「Messaging API設定」**タブをクリック
3. **Webhook設定**の中の**「編集」**をクリック

#### 手順3：URLを登録

1. コピーしたWebhook URLを貼り付け
2. **「更新」**をクリック

#### 手順4：Webhookを有効化

1. **「Webhookの利用」**の右側にあるスイッチをクリックしてオンにする

#### 手順5：接続テスト

1. **「検証」**をクリック
2. **「成功」**の表示が出ることを確認
3. **「OK」**で閉じる

🎉 これで連携完了です！

### 2-4. 試してみよう

miiboとLINEが連携され、会話型AIのLINE Botが完成しました！

#### テスト方法

1. 作成したLINE Botを友だち追加
2. 何かメッセージを送信
3. AIからの返答を確認

早速、LINE Botに何かメッセージを送信して会話をしてみましょう。
AIと対話できましたか？

#### 試してみる質問例

- 「こんにちは」
- 「今日の天気は？」
- 「おすすめの本を教えて」
- 「プログラミングについて教えて」

---

## 3. Tips 💡

### 他のサービスとも連携可能

外部サービス連携には今回使ったLINEだけではなく、様々なチャットサービスと連携できます：

- **Slack**: ビジネスチャット
- **Discord**: コミュニティチャット
- **Teams**: Microsoft製ビジネスチャット
- **Webサイト埋め込み**: 自社サイトに設置

連携方法は各設定の中の**「利用方法を見る」**から確認できます。

### トラブルシューティング

**Q: 返答が来ない場合**
- Webhook URLが正しくコピーされているか確認
- Webhookの利用がONになっているか確認
- チャネルアクセストークンが正しいか確認

**Q: エラーメッセージが返ってくる**
- miiboの会話クレジットが残っているか確認
- エージェントが公開状態になっているか確認

---

## 4. チャレンジ 🎯

### 作成したBotを共有しよう

1. 完成した会話型AIのLINE Botと会話した様子をスクリーンショット
2. 授業連絡用のTeamsに投稿
3. 周りの方と共有し、お互いのLINE Botで会話を試してみる

### 共有方法

**Messaging API設定**タブから自分の**QRコード**を表示して、読み取ってもらいましょう。

### 共有時のポイント

- どんな工夫をしたか説明
- 特徴的な返答例を紹介
- 使い道のアイデアを共有

---

## 5. まとめ

### 今回達成したこと

✅ miiboとLINEの連携方法を習得
✅ Webhook URLの仕組みを理解
✅ 実際に動作するLINE Botの作成
✅ AIを活用したサービスの構築

miiboを使って会話型AIのLINE Botを作ることができました！
現在は簡単なメッセージのやり取りができていますが、より自分だけのオリジナルLINE Botにしていきたいですね。

### 次のステップ

次のパートからは、会話型AIを自分好みにどんどんカスタマイズしていきます。楽しみですね！

**カスタマイズ例：**
- プロンプトを工夫して性格を変更
- 特定の役割（英語教師、料理アドバイザーなど）を設定
- 画像認識や音声対応などの高度な機能追加

---

**おめでとうございます！** あなたは今、AIを活用したLINE Botの開発者です！🎊